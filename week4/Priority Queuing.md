#                                第六章——优先队列（堆）

## 一.导入

  对于优先队列我的理解是他是一种特殊的队列，相比于正常的队列其多了一个优先级，优先权的概念是区分队列和优先队列（堆）的一个区分点。其最核心的功能就在于自动排序。

  元素被赋予优先级，当访问元素时，具有最高级优先级的元素先被访问。即优先队列具有最高级先出的行为特征。它可以说是队列和排序的完美结合体，不仅可以存储数据，还可以将这些数据按照我们设定的规则进行排序。



## 二.二叉堆

一种特殊的二叉树，堆的本质是一颗完全二叉树，满足要求所有节点都大于等于或小于等于它的两个子节点（大顶堆或小顶堆）。这一步不难理解，接下来，在实际情况中我们会把这个堆放在一个数组里面，可能大家之前了解过用数组存放完全二叉树的方法，这边是一模一样的。这种方法可以让我们利用数组的索引快速的算出子节点和父节点。

## 三.性质

1、结构性：堆是一棵除底层外被完全填满的二叉树，底层的节点从左到右填入，这样的树叫做完全二叉树。

2、堆序性：由于我们想很快找出最小元，则最小元素应在根上，任意节点都小于它的孩子，这就是最小堆；如果是查找最大元素，则最大元素应该在根上，任意节点都要大于它的孩子，这就是最大堆。

## 四.例子

1、有序队列

       每次加入一个元素的时候，把它移到一个适合的位置上，比如队列中已经有1，3，4，现在要加入2，那么把2移到1和3的中间，这个合适的位置定义为：前一个元素； 这样入队保证有序，那么出队就直接把第一个元素拿出来，就是最小的。显然n个元素的时间复杂度，入队操作O(n)，出队操作O(1)，缺点：该方法，如果有大量的入队操作比较耗时。

  2、普通队列

        入队的时候什么都不做，那么直接添加到尾部，出队时候选择遍历数组中最小的元素出队，比如队列中1,3,4，加入2，直接把2添加到尾部即可，出队的时候，遍历数组，找到最大或最小的元素，出队就行了，显然，入队操作O(1)，出队操作O(n)，缺点：如果有大量出队操作比较耗时。

  3、二叉堆

1.insert（插入）

  由下至上的堆有序化（上浮）：为了插入元素X，我们在最后一个可用的位置建立空穴，如果此元素放入不破坏有序性，则插入完成。否则，将父节点下移，此节点上浮。重复操作此过程，直到满足为止。

2、delete

由上至下的堆有序化（下沉）：因为我们建立的最小堆，所以删除最小元素，就是将根节点删掉，这样就破坏了有序性。为了满足结构性，堆中最后一个元素X必须移动到合适的位置，如果可以直接放到空穴，则删除完成（一般不可能）；否则，将空穴的左右儿子中较小者移到空穴，即空穴下移了一层。继续这样的操作，直到X可以放入到空穴中。这样就可以满足结构性与堆序性。


